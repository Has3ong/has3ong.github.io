<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Try

	Index Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/icon.png">
	<title>Ethereum Tokens -4- – Try</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Ethereum Tokens -4- – Try">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Ethereum Tokens -4- – Try" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	

	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/ethereum-token4">


	<header class="header">

	<div class="header__content">

		
		<a href="/" class="header__title">
			Try
		</a>
		

		<h1 class="header__tagline">The man who moves a mountain begins by carrying away small stones. - Confucius</h1>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/apache" class="menu__list__item__link">Apache</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blockchain" class="menu__list__item__link">BlockChain</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/computerscience" class="menu__list__item__link">Computer Science</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/database" class="menu__list__item__link">DataBase</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/devops" class="menu__list__item__link">DevOps</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/imageprocessing" class="menu__list__item__link">Image Processing</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/linux" class="menu__list__item__link">Linux</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/machinelearning" class="menu__list__item__link">Machine Learning</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/programming" class="menu__list__item__link">Programming</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/softwaremaestro" class="menu__list__item__link">SW Maestro</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/web" class="menu__list__item__link">Web</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div class="projects-menu">
			<ul class="menu__list">
				
			</ul>
		</div>

		<div class="header__lower">

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

			<div class="footer__copyright">
				<span>© 2020 Try</span>
				Has3ong
			</div>

		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Ethereum Tokens -4- – Try">

			<section class="intro">

	<div class="wrap">

		<h1>Ethereum Tokens -4-</h1>
		<p>31 January 2020</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p><em>이 포스트는 <a href="https://github.com/ethereumbook/ethereumbook">Mastering Ethereum</a>를 바탕으로 작성하였습니다.</em></p>

<h2 id="issues-with-erc20-tokens">Issues with ERC20 Tokens</h2>

<p>ERC20 토큰 표준의 채택으로 인해 수천 개의 토큰이 출시되었습니다. 하지만 그에따른 몇가지 문제도 발생했습니다.</p>

<p>ERC20 토큰의 문제중 하나는 토큰과 이더 자체 사이의 미묘한 차이가 관련있습니다. 이더는 수신자의 주소를 목적지로 가지고 있는 트랜잭션에 의해 전송이 일어나는 반면, 토큰 전송은 <strong>특정한 토큰 컨트랙트 상태(specific token contract state)</strong> 안에서 일어나고 수신자의 주소가 아닌 토큰 컨트랙트를 목적지로 합니다.</p>

<p>토큰 컨트랙트는 밸런스를 관리하고 이벤트를 발생시킵니다. 토큰 전송에서 트랜잭션이 토큰 수신자에게 실제로 보내는 것이 아니라 받는 사람의 주소가 토큰 컨트랙트 자체의 맵에 추가됩니다.</p>

<p>이더를 주소로 보내는 트랜잭션은 주소의 상태를 변경합니다. 하지만, 토큰을 주소로 전송하는 트랜잭션은 토큰 컨트랙트의 상태를 변경하지 않습니다. ERC20 토큰을 지원하는 지갑조차 사용자가 토큰 컨트랙트를 명시적으로 추가하지 않는 한 토큰 잔액을 인식하지 못합니다.</p>

<p>또한, 토큰은 이더와 같은 방식으로 동작하지 않습니다. 이더는 <code class="highlighter-rouge">send</code> 함수에 의해 보내지며, 컨트랙트에 있는 <code class="highlighter-rouge">payable</code> 함수 또는 외부 소유 주소에 의해 수신됩니다. 토큰은 <code class="highlighter-rouge">transfer</code> 또는 <code class="highlighter-rouge">approve</code>, <code class="highlighter-rouge">transferFrom</code> 을 사용하여 전송되며 수령인 컨트랙트에서 <code class="highlighter-rouge">payable</code> 함수를 트리거하지 않습니다.</p>

<p>마지막으로 이더를 보내거나 이더리움 컨트랙트를 사용하려면 가스를 지급하기 위해 이더가 필요한데, 토큰을 보내도 이더가 필요합니다. 트랜잭션의 가스를 토큰으로 지급할 수 없으며, 토큰 컨트랙트는 가스를 지급할 수 없습니다.</p>

<p>이러한 문제는 ERC20 토큰에만 해당이 됩니다. 그래서 다양한 표준 제안을 알아보겠습니다.</p>

<h2 id="erc223-a-proposed-token-contract-interface-standard">ERC223: A Proposed Token Contract Interface Standard</h2>

<p>ERC223 제안은 목적지 주소가 컨트랙트인지 아닌지 여부를 감지함으로써 실수로 토큰을 컨트랙트로 전송하는 문제를 해결하려고 합니다. ERC223 에서는 토큰을 받도록 설계된 컨트랙트에 <code class="highlighter-rouge">tokenFallback</code> 이라는 함수를 구현해야 합니다.</p>

<p>전송 목적지가 컨트랙트인데, 그 컨트랙트에 토큰에 대한 자원이 없는 경우 전송이 실패합니다.</p>

<p>대상 주소가 컨트랙트인지 여부를 감지하기 위해 ERC223 표준 구현은 특별한 방법으로 인라인 바이트 코드의 작은 세그먼트를 사용합니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">function</span> <span class="nf">isContract</span><span class="o">(</span><span class="n">address</span> <span class="n">_addr</span><span class="o">)</span> <span class="kd">private</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">bool</span> <span class="n">is_contract</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">uint</span> <span class="n">length</span><span class="o">;</span>
    <span class="n">assembly</span> <span class="o">{</span>
       <span class="c1">// retrieve the size of the code on target address; this needs assembly</span>
       <span class="n">length</span> <span class="o">:=</span> <span class="n">extcodesize</span><span class="o">(</span><span class="n">_addr</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ERC223 컨트랙트 인터페이스 사양은 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC223Token</span> <span class="o">{</span>
  <span class="n">uint</span> <span class="kd">public</span> <span class="n">totalSupply</span><span class="o">;</span>
  <span class="n">function</span> <span class="nf">balanceOf</span><span class="o">(</span><span class="n">address</span> <span class="n">who</span><span class="o">)</span> <span class="kd">public</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint</span><span class="o">);</span>

  <span class="n">function</span> <span class="nf">name</span><span class="o">()</span> <span class="kd">public</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span> <span class="n">_name</span><span class="o">);</span>
  <span class="n">function</span> <span class="nf">symbol</span><span class="o">()</span> <span class="kd">public</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span> <span class="n">_symbol</span><span class="o">);</span>
  <span class="n">function</span> <span class="nf">decimals</span><span class="o">()</span> <span class="kd">public</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint8</span> <span class="n">_decimals</span><span class="o">);</span>
  <span class="n">function</span> <span class="nf">totalSupply</span><span class="o">()</span> <span class="kd">public</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span> <span class="n">_supply</span><span class="o">);</span>

  <span class="n">function</span> <span class="nf">transfer</span><span class="o">(</span><span class="n">address</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint</span> <span class="n">value</span><span class="o">)</span> <span class="kd">public</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">bool</span> <span class="n">ok</span><span class="o">);</span>
  <span class="n">function</span> <span class="nf">transfer</span><span class="o">(</span><span class="n">address</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint</span> <span class="n">value</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">data</span><span class="o">)</span> <span class="kd">public</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">bool</span> <span class="n">ok</span><span class="o">);</span>
  <span class="n">function</span> <span class="nf">transfer</span><span class="o">(</span><span class="n">address</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint</span> <span class="n">value</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">data</span><span class="o">,</span> <span class="n">string</span> <span class="n">custom_fallback</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">bool</span> <span class="n">ok</span><span class="o">);</span>

  <span class="n">event</span> <span class="nf">Transfer</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">from</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint</span> <span class="n">value</span><span class="o">,</span>
                 <span class="n">bytes</span> <span class="n">indexed</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="erc777-a-proposed-token-contract-interface-standard">ERC777: A Proposed Token Contract Interface Standard</h2>

<p>ERC777 토큰에 대한 제안은 <a href="https://eips.ethereum.org/EIPS/eip-777">ERC777</a>에 있습니다. 이 제안은 다음과 같은 목표가 있습니다.</p>

<ul>
  <li>ERC20 호환 인터페이스 제공</li>
  <li><code class="highlighter-rouge">send</code> 함수를 사용하여 토큰을 전송</li>
  <li>토큰 컨트랙트 등록을 위해 ERC820 과 호환 가능</li>
  <li>컨트랙트 주소가 토큰을 전송하기 전에 어느 토큰을 전송할 수 있는가를 <code class="highlighter-rouge">takesToSend</code> 함수를 통해 컨트롤</li>
  <li>수신자의 <code class="highlighter-rouge">tokensReceived</code> 함수를 호출하여 컨트랙트 및 주소에 토큰의 수신 사실을 통지할 수 있게 하고 컨트랙트에 <code class="highlighter-rouge">tokensReceived</code> 함수를 제공하도록 요구함으로써 컨트랙트가 잠길 확률을 줄임</li>
  <li>기존 컨트랙트가 <code class="highlighter-rouge">tokensToSend</code> 및 <code class="highlighter-rouge">tokensReceived</code> 함수에 대해 프록시 컨트랙트를 사용하도록 허용</li>
  <li>컨트랙트로 보내거나 EOA 로 보내거나와 같은 방식으로 작동</li>
  <li>토큰 발행 및 소각을 위한 특정 이벤트 제</li>
  <li>토큰 보유자 대신 토큰을 이동시키는 운영자 허용</li>
  <li><code class="highlighter-rouge">userData</code> 및 <code class="highlighter-rouge">operatorData</code> 필드에서 토큰 전송 트랜잭션에 대한 메타데이터 제공</li>
</ul>

<p>ERC777 컨트랙트 인터페이스 사양은 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC777Token</span> <span class="o">{</span>
    <span class="n">function</span> <span class="nf">name</span><span class="o">()</span> <span class="kd">public</span> <span class="n">constant</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">symbol</span><span class="o">()</span> <span class="kd">public</span> <span class="n">constant</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">totalSupply</span><span class="o">()</span> <span class="kd">public</span> <span class="n">constant</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">granularity</span><span class="o">()</span> <span class="kd">public</span> <span class="n">constant</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">balanceOf</span><span class="o">(</span><span class="n">address</span> <span class="n">owner</span><span class="o">)</span> <span class="kd">public</span> <span class="n">constant</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span><span class="o">);</span>

    <span class="n">function</span> <span class="nf">send</span><span class="o">(</span><span class="n">address</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">amount</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">userData</span><span class="o">)</span> <span class="kd">public</span><span class="o">;</span>

    <span class="n">function</span> <span class="nf">authorizeOperator</span><span class="o">(</span><span class="n">address</span> <span class="n">operator</span><span class="o">)</span> <span class="kd">public</span><span class="o">;</span>
    <span class="n">function</span> <span class="nf">revokeOperator</span><span class="o">(</span><span class="n">address</span> <span class="n">operator</span><span class="o">)</span> <span class="kd">public</span><span class="o">;</span>
    <span class="n">function</span> <span class="nf">isOperatorFor</span><span class="o">(</span><span class="n">address</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">tokenHolder</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">constant</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">bool</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">operatorSend</span><span class="o">(</span><span class="n">address</span> <span class="n">from</span><span class="o">,</span> <span class="n">address</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">amount</span><span class="o">,</span>
                          <span class="n">bytes</span> <span class="n">userData</span><span class="o">,</span><span class="n">bytes</span> <span class="n">operatorData</span><span class="o">)</span> <span class="kd">public</span><span class="o">;</span>

    <span class="n">event</span> <span class="nf">Sent</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">from</span><span class="o">,</span>
               <span class="n">address</span> <span class="n">indexed</span> <span class="n">to</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">amount</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">userData</span><span class="o">,</span>
               <span class="n">bytes</span> <span class="n">operatorData</span><span class="o">);</span>
    <span class="n">event</span> <span class="nf">Minted</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">to</span><span class="o">,</span>
                 <span class="n">uint256</span> <span class="n">amount</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">operatorData</span><span class="o">);</span>
    <span class="n">event</span> <span class="nf">Burned</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">from</span><span class="o">,</span>
                 <span class="n">uint256</span> <span class="n">amount</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">userData</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">operatorData</span><span class="o">);</span>
    <span class="n">event</span> <span class="nf">AuthorizedOperator</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">operator</span><span class="o">,</span>
                             <span class="n">address</span> <span class="n">indexed</span> <span class="n">tokenHolder</span><span class="o">);</span>
    <span class="n">event</span> <span class="nf">RevokedOperator</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">tokenHolder</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="erc777-hooks">ERC777 hooks</h3>

<p>ERC777 토큰 발신자 후크 사양은 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC777TokensSender</span> <span class="o">{</span>
    <span class="n">function</span> <span class="nf">tokensToSend</span><span class="o">(</span><span class="n">address</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">from</span><span class="o">,</span> <span class="n">address</span> <span class="n">to</span><span class="o">,</span>
                          <span class="n">uint</span> <span class="n">value</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">userData</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">operatorData</span><span class="o">)</span> <span class="kd">public</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>이 인터페이스의 구현은 토큰 지불 통지, 처리 또는 예방을 워하는 모든 주소에 필요합니다. 이 인터페이스를 구현하는 컨트랙트의 주소는 컨트랙트 자체 또는 다른 주소용 인터페이스를 구현하는것과 관계없이 ERC820 을 등록해야 합니다.</p>

<p>ERC777 토큰 수신자 후크 사양은 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC777TokensRecipient</span> <span class="o">{</span>
  <span class="n">function</span> <span class="nf">tokensReceived</span><span class="o">(</span>
     <span class="n">address</span> <span class="n">operator</span><span class="o">,</span> <span class="n">address</span> <span class="n">from</span><span class="o">,</span> <span class="n">address</span> <span class="n">to</span><span class="o">,</span>
    <span class="n">uint</span> <span class="n">amount</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">userData</span><span class="o">,</span> <span class="n">bytes</span> <span class="n">operatorData</span>
  <span class="o">)</span> <span class="kd">public</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>위 인터페이스의 구현은 토큰의 수신을 통지, 처리 거부하려는 모든 주소에 필요합니다. 토큰 발신자 인터페이스와 마찬가지로 동일한 논리 및 요구사항이 토큰 수신자 인터페이스에도 적용되어야 합니다. 즉, 수신자 컨트랙트가 토큰 잠김을 막기 위해 사용합니다. 수신자 컨트랙트가 인터페이스를 구현하는 주소를 등록하지 않으면, 토큰 전송이 실패합니다.</p>

<h2 id="erc721-non-fungible-token-deed-standard">ERC721: Non-fungible Token (Deed) Standard</h2>

<p>지금까지 살펴본 토큰 표준은 <strong>대체 가능한(fungible)</strong> 입니다.</p>

<p><a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md">ERC721 제안</a> 은 <strong>증서(deed)</strong> 로 알려진 <strong>대체할 수 없는(non-fungible)</strong> 토큰에 표준을 위한것입니다.</p>

<p>대체할 수 없는 토큰은 게임 아이템이 디지털 수집물 같은 아이템일 수도 있습니다. 또한, 자동차 같은 소유권을 추적하기 위한 실물일 수도 있습니다.</p>

<p>ERC721 표준은 증서에의해 그 소유권이 고유하게 추적될 수 있는 한, 그 대상의 종류에 대해 어떤 제한이나 규정을 두지 않으며, 이러한 추적은 256 bit 식별자에 의해 이루어 집니다.</p>

<p>ERC721 의 내부 데이터 구조를 살펴보겠습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Mapping from deed ID to owner</span>
<span class="n">mapping</span> <span class="o">(</span><span class="n">uint256</span> <span class="o">=&gt;</span> <span class="n">address</span><span class="o">)</span> <span class="kd">private</span> <span class="n">deedOwner</span><span class="o">;</span>
</code></pre></div></div>

<p>ERC20 은 각 소유자에 속한 잔액을 추적하고 소유자는 매핑의 기본 키인 반면, ERC721 은 각 증서 ID 와 소유권자를 추적하며 증서 ID 는 매핑의 기본 키가 됩니다.</p>

<p>ERC721 컨트랙트 인터페이스 사양은 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC721</span> <span class="cm">/* is ERC165 */</span> <span class="o">{</span>
    <span class="n">event</span> <span class="nf">Transfer</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_from</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_to</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">_deedId</span><span class="o">);</span>
    <span class="n">event</span> <span class="nf">Approval</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_owner</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_approved</span><span class="o">,</span>
                   <span class="n">uint256</span> <span class="n">_deedId</span><span class="o">);</span>
    <span class="n">event</span> <span class="nf">ApprovalForAll</span><span class="o">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_owner</span><span class="o">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_operator</span><span class="o">,</span>
                         <span class="n">bool</span> <span class="n">_approved</span><span class="o">);</span>

    <span class="n">function</span> <span class="nf">balanceOf</span><span class="o">(</span><span class="n">address</span> <span class="n">_owner</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span> <span class="n">_balance</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">ownerOf</span><span class="o">(</span><span class="n">uint256</span> <span class="n">_deedId</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">address</span> <span class="n">_owner</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">transfer</span><span class="o">(</span><span class="n">address</span> <span class="n">_to</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">_deedId</span><span class="o">)</span> <span class="n">external</span> <span class="n">payable</span><span class="o">;</span>
    <span class="n">function</span> <span class="nf">transferFrom</span><span class="o">(</span><span class="n">address</span> <span class="n">_from</span><span class="o">,</span> <span class="n">address</span> <span class="n">_to</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">_deedId</span><span class="o">)</span>
        <span class="n">external</span> <span class="n">payable</span><span class="o">;</span>
    <span class="n">function</span> <span class="nf">approve</span><span class="o">(</span><span class="n">address</span> <span class="n">_approved</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">_deedId</span><span class="o">)</span> <span class="n">external</span> <span class="n">payable</span><span class="o">;</span>
    <span class="n">function</span> <span class="nf">setApprovalForAll</span><span class="o">(</span><span class="n">address</span> <span class="n">_operateor</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">_approved</span><span class="o">)</span> <span class="n">payable</span><span class="o">;</span>
    <span class="n">function</span> <span class="nf">supportsInterface</span><span class="o">(</span><span class="n">bytes4</span> <span class="n">interfaceID</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">bool</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ERC721 은 또한 메타데이터와 증서 및 소유자의 열거를 위해 2개의 <strong>선택적(optional)</strong> 인터페이스를 지원합니다.</p>

<p>메타데이터에 대한 ERC721 선택적 인터페이스는 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC721Metadata</span> <span class="cm">/* is ERC721 */</span> <span class="o">{</span>
    <span class="n">function</span> <span class="nf">name</span><span class="o">()</span> <span class="n">external</span> <span class="n">pure</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span> <span class="n">_name</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">symbol</span><span class="o">()</span> <span class="n">external</span> <span class="n">pure</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span> <span class="n">_symbol</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">deedUri</span><span class="o">(</span><span class="n">uint256</span> <span class="n">_deedId</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">string</span> <span class="n">_deedUri</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>열거를 위한 ERC721 선택적 인터페이스는 다음과 같습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ERC721Enumerable</span> <span class="cm">/* is ERC721 */</span> <span class="o">{</span>
    <span class="n">function</span> <span class="nf">totalSupply</span><span class="o">()</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span> <span class="n">_count</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">deedByIndex</span><span class="o">(</span><span class="n">uint256</span> <span class="n">_index</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span> <span class="n">_deedId</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">countOfOwners</span><span class="o">()</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span> <span class="n">_count</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">ownerByIndex</span><span class="o">(</span><span class="n">uint256</span> <span class="n">_index</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span> <span class="nf">returns</span> <span class="o">(</span><span class="n">address</span> <span class="n">_owner</span><span class="o">);</span>
    <span class="n">function</span> <span class="nf">deedOfOwnerByIndex</span><span class="o">(</span><span class="n">address</span> <span class="n">_owner</span><span class="o">,</span> <span class="n">uint256</span> <span class="n">_index</span><span class="o">)</span> <span class="n">external</span> <span class="n">view</span>
        <span class="nf">returns</span> <span class="o">(</span><span class="n">uint256</span> <span class="n">_deedId</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>


		<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://has3ong-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	</div>



</section>


		</div>

	</div>

	<footer class="footer">

	<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

	<div class="footer__copyright">
		<span>© 2020 Try</span>
		Has3ong
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/index-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>