<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Try

	Index Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/icon.png">
	<title>Hadoop Distributed FileSystem – Try</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Hadoop Distributed FileSystem – Try">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Hadoop Distributed FileSystem – Try" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	

	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/hadoop-introduction1">


	<header class="header">

	<div class="header__content">

		
		<a href="/" class="header__title">
			Try
		</a>
		

		<h1 class="header__tagline">The man who moves a mountain begins by carrying away small stones. - Confucius</h1>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/apache" class="menu__list__item__link">Apache</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blockchain" class="menu__list__item__link">BlockChain</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/computerscience" class="menu__list__item__link">Computer Science</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/database" class="menu__list__item__link">DataBase</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/devops" class="menu__list__item__link">DevOps</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/imageprocessing" class="menu__list__item__link">Image Processing</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/linux" class="menu__list__item__link">Linux</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/machinelearning" class="menu__list__item__link">Machine Learning</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/programming" class="menu__list__item__link">Programming</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/softwaremaestro" class="menu__list__item__link">SW Maestro</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/web" class="menu__list__item__link">Web</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div class="projects-menu">
			<ul class="menu__list">
				
			</ul>
		</div>

		<div class="header__lower">

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

			<div class="footer__copyright">
				<span>© 2020 Try</span>
				Has3ong
			</div>

		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Hadoop Distributed FileSystem – Try">

			<section class="intro">

	<div class="wrap">

		<h1>Hadoop Distributed FileSystem</h1>
		<p>11 December 2019</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p><em>이 포스트는 <a href="https://github.com/Farheen2302/hadoop-project/blob/master/hadoop_reading/Hadoop%20The%20Definitive%20Guide%2C%204th%20Edition.pdf">Hadoop The Definitive Guide, 4th Edition</a>를 바탕으로 작성하였습니다.</em></p>

<h2 id="hadoop-distributed-filesystem">Hadoop Distributed FileSystem</h2>

<p>데이터가 단일 물리 머신의 저장 용량을 초과하게 되면 전체 데이터셋을 분리된 여러 머신에 저장할 필요가 있다. 네트워크로 연결된 여러 머신의 스토리지를 관리하는 파일 시스템을 분산파일시스템이라고 한다.</p>

<p>분산 파일 시스템은 네트워크 기반이라 일반적인 디스크 파일 시스템보다 훨씬 복잡하다. 특정 노드에 장애가 발생하여도 자료가 유실되지 않는 파일 시스템이 필요하다. 하둡은 HDFS라는 분산 파일시스템을 제공하여 이러한 문제를 해결한다.</p>

<h3 id="architecture">Architecture</h3>

<p><strong>이점</strong></p>

<ul>
  <li>매우 큰 파일</li>
  <li>스트리밍 방식의 데이터 접근</li>
  <li>범용 하드웨어</li>
</ul>

<p><strong>단점</strong></p>

<ul>
  <li>빠른 데잍어 응답 시간</li>
  <li>수 많은 작은 파일</li>
  <li>다중 라이터와 파일의임의 수정</li>
</ul>

<h2 id="hdfs-concept">HDFS Concept</h2>

<h3 id="block">Block</h3>

<p>물리적인 디스크는 블록 크기라는 개념이 있습니다. 디스크 블록의 크기는 기본적으로 512Byte 입니다. HDFS 블록은 기본적으로 128MB와 같이 굉장히 큰 단위입니다. HDFS 의 파일은 블록 크기보다 작은 데이터일 경우 전체 블록 크기에 해당하는 하위 디스크를 모두 점유하지 않습니다.</p>

<p>예를 들어 128MB 블록크기의 1MB 크기의 파일을 저장하면 1MB 의 디스크만 사용합니다.</p>

<blockquote>
  <p>HDFS 블록이 큰 이유는 탐색 비용을 최소화 하기 위해서다.</p>
</blockquote>

<p>분산 파일시스템에 블록 추상화의 개념을 도입하면서 얻게되는 몇가지 이점이있다.</p>

<ol>
  <li>파일 하나의 크기가 단일 디스크의 용량보다 더 커질수 있다.</li>
  <li>파일 단위보다는 블록 단위로 추상화하여 스토리지의 서브 시스템을 단순하게 만들 수 있다.</li>
</ol>

<h2 id="namenode--datanode">NameNode / DataNode</h2>

<p>HDFS 클러스터는 마스터-워커 패턴으로 동작하는 두 종류의 노드 네임노드와 여러개의 데이터노드로 구성되어 있습니다.</p>

<h3 id="namenode">NameNode</h3>

<ol>
  <li>파일시스템의 네임 스페이스 관리</li>
  <li>파일시스템 트리와 트리에 포함된 모든 파일과 디렉터리에 대한 메타데이터 유지 관리</li>
</ol>

<p>메타데이터는 네임스페이스 이미지와 에디트 로그라는 두 종류의 파일로 로컬 디스크에 영속적으로 저장된다. 하지만, 블록의 위치 정보는 시스템이 시작할때 모든 데이터 노드로부터 받아 재구성하기 때문에 영속적으로 저장하지 않는다.</p>

<h3 id="datanode">DataNode</h3>

<ol>
  <li>HDFS 의 실질적인 일꾼</li>
  <li>클라이언트나 네임노드의 요청이 있을때 블록을 저장 및 탐색</li>
</ol>

<p>네임 노드가 없으면 파일 시스템은 동작하지 않습니다. 따라서 네임노드의 장애복구 기능을 위해 Hadoop은 두 가지 메커니즘을 제공합니다.</p>

<ol>
  <li>파일 시스템의 메타 데이터를 지속적인 상태로 보존하기 위해 파일로 백업</li>
  <li>보조 네임노드를 운영</li>
</ol>

<h3 id="secondary-namenode">Secondary NameNode</h3>

<p>보조 네임노드는 주 네임노드와 다르게 동작한다. 보조 네임노드의 주 역할은 에디트 로그가 너무 커지지 않도록 주기적으로 네임 스페이스 이미지를 에디트 로그와 병합하여 새로운 네임스페이스 이미지를 만드는것이다.</p>

<p>또한, 보조 네임노드는 주 네이몬드에 장애가 발생할 것을 대비해서 네임스페이스 이미지의 복제본을 보관하는 역할도 맡는다.</p>

<h2 id="block-cache">Block Cache</h2>

<p>데이터노드는 디스크에 저장된 블록을 읽는다. 하지만 빈번하게 접근하는 블록 파일은 <strong>블록 캐시</strong> 라는 데이터 노드의 메모리에 명시적으로 캐싱한다.</p>

<p>기본적으로 블록은 하나의 데이터노드 메모리에만 캐싱되지만 파일 단위로 설정이 가능하다.</p>

<p>사용자나 어플리케이션은 Cache Pool 에 Cache Directive 를 추가하여 특정 파일을 캐싱하도록 명령할 수 있다.</p>

<h2 id="hdfs-federation">HDFS Federation</h2>

<p>HDFS 페더레이션을 이용하면 각 네임노드는 네임스페이스의 메타데이터를 구성하는 <strong>네임스페이스 볼륨(namespace volume)</strong> 과 네임스페이스에 포함된 파일의 전체 블록을 보고나하는 <strong>블록 풀(block pool)</strong> 을 관리한다.</p>

<p>네임스페이스 볼륨은 서로 독립되어 있으며, 따라서 네임노드는 서로 통신할 필요가 없고, 특정 네임노드에 장애가 발생해도 네임노드가 관리하는 네임스페이스의 가용성에 영향을 주지 않는다. 하지만 블록 풀의 저장소눈 분리되어 있지 않다.</p>

<h2 id="failover-controller--fencing">Failover Controller / Fencing</h2>

<p>네임노드를 활성화시키는 전환 작업은 <strong>장애복구 컨트롤러(Failover Controller)</strong> 라는 객체로 관리된다. 기본 구현방법은 하나의 네임노드만 활성 상태에 있는것을 보장하기 위해 Zookeeper 를 이용한다.</p>

<p>장애복구는 정기적인 유지관리를 위해 관리자가 수동으로 초기화할 수 있다. 이를 <strong>우아한 장애복구</strong> 라고도 합니다. 두 개의 네임노드가 서로 역할을 바꾸게 하는 방법으로 전환 순서를 제어할 수 있다.</p>

<p>그러나 장애가 발생한 네임노드가 현재 실행되지 않고 있다는것을 확신하기 어렵습니다. 예를 들어 네트워크가 느려지거나 단절되어 장애복구를 위한 작업이 시작된 상황에서도 기존의 활성 네임노드는 여전히 실행되고 있고 자신이 활성 네임노드라 생각할 수 있습니다. 고가용성을 구현하기 위해서는 기존의 활성 네임노드가 시스템을 손상시키거나 망가뜨리지 않도록 엄청난 노력을 기울이는데 이를 위해 <strong>펜싱(fencing)</strong> 이라는 메소드를 제공한다.
맨위로</p>


		<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://has3ong-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	</div>



</section>


		</div>

	</div>

	<footer class="footer">

	<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

	<div class="footer__copyright">
		<span>© 2020 Try</span>
		Has3ong
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/index-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>