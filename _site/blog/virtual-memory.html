<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Try

	Index Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/icon.png">
	<title>Virtual Memory – Try</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Virtual Memory – Try">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Virtual Memory – Try" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	

	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/virtual-memory">


	<header class="header">

	<div class="header__content">

		
		<a href="/" class="header__title">
			Try
		</a>
		

		<h1 class="header__tagline">The man who moves a mountain begins by carrying away small stones. - Confucius</h1>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/apache" class="menu__list__item__link">Apache</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blockchain" class="menu__list__item__link">BlockChain</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/computerscience" class="menu__list__item__link">Computer Science</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/database" class="menu__list__item__link">DataBase</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/devops" class="menu__list__item__link">DevOps</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/imageprocessing" class="menu__list__item__link">Image Processing</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/linux" class="menu__list__item__link">Linux</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/machinelearning" class="menu__list__item__link">Machine Learning</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/programming" class="menu__list__item__link">Programming</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/softwaremaestro" class="menu__list__item__link">SW Maestro</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/web" class="menu__list__item__link">Web</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div class="projects-menu">
			<ul class="menu__list">
				
			</ul>
		</div>

		<div class="header__lower">

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

			<div class="footer__copyright">
				<span>© 2020 Try</span>
				Has3ong
			</div>

		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Virtual Memory – Try">

			<section class="intro">

	<div class="wrap">

		<h1>Virtual Memory</h1>
		<p>27 October 2019</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<h2 id="가상-메모리">가상 메모리</h2>

<p>다중 프로그래밍을 실현하기 위해서는 많은 프로세스들을 동시에 메모리에 올려두어야 한다. 가상메모리는 프로세스 전체가 메모리 내에 올라오지 않더라도 실행이 가능하도록 하는 기법이며, 프로그램이 물리 메모리보다 커도 된다는 주요 장점이 있다.</p>

<h3 id="가상-메모리-개발-배경">가상 메모리 개발 배경</h3>

<p>실행되는 코드의 전부를 물리 메모리에 존재시켜야 했고, 메모리 용량보다 큰 프로그램은 실행시킬 수 없었다. 또한, 여러 프로그램을 동시에 메모리에 올리기에는 용량의 한계와, 페이지 교체등의 성능 이슈가 발생하게 된다.
또한, 가끔만 사용되는 코드가 차지하는 메모리들을 확인할 수 있다는 점에서, 불필요하게 전체의 프로그램 전체가 메모리에 올라와 있어야 하는게 아니라는 것을 알 수 있다.</p>

<h4 id="프로그램의-일부분만-메모리에-올릴-수-있다면">프로그램의 일부분만 메모리에 올릴 수 있다면…</h4>

<ul>
  <li>물리 메모리 크기에 제약받지 않게 된다.</li>
  <li>더 많은 프로그램을 동시에 실행할 수 있게 된다. 이에 따라 <code class="highlighter-rouge">응답시간</code>은 유지되고, <code class="highlighter-rouge">CPU 이용률</code>과 <code class="highlighter-rouge">처리율</code>은 높아진다.</li>
  <li>swap에 필요한 입출력이 줄어들기 때문에 프로그램들이 빠르게 실행된다.</li>
</ul>

<h3 id="가상-메모리가-하는-일">가상 메모리가 하는 일</h3>

<p>가상 메모리는 실제의 물리 메모리 개념과 사용자의 논리 메모리 개념을 분리한 것으로 정리할 수 있다. 이로써 작은 메모리를 가지고도 얼마든지 큰 <code class="highlighter-rouge">가상 주소 공간</code>을 프로그래머에게 제공할 수 있다.</p>

<h4 id="가상-주소-공간">가상 주소 공간</h4>

<ul>
  <li>한 프로세스가 메모리에 저장되는 논리적인 모습을 가상메모리에 구현한 공간이다.
프로세스가 요구하는 메모리 공간을 가상메모리에서 제공함으로서 현재 직접적으로 필요치 않은 메모리 공간은 실제 물리 메모리에 올리지 않는 것으로 물리 메모리를 절약할 수 있다.</li>
  <li>예를 들어, 한 프로그램이 실행되며 논리 메모리로 100KB 가 요구되었다고 하자.
하지만 실행까지에 필요한 메모리 공간<code class="highlighter-rouge">(Heap영역, Stack 영역, 코드, 데이터)</code>의 합이 40KB 라면, 실제 물리 메모리에는 40KB 만 올라가 있고, 나머지 60KB 만큼은 필요시에 물리메모리에 요구한다고 이해할 수 있겠다.</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/44635266/67660179-7afd9200-f9a1-11e9-9017-8cda7d1a5ff7.png" alt="image" /></p>

<h4 id="프로세스간의-페이지-공유">프로세스간의 페이지 공유</h4>

<p>가상 메모리는…</p>

<ul>
  <li><code class="highlighter-rouge">시스템 라이브러리</code>가 여러 프로세스들 사이에 공유될 수 있도록 한다.
각 프로세스들은 <code class="highlighter-rouge">공유 라이브러리</code>를 자신의 가상 주소 공간에 두고 사용하는 것처럼 인식하지만, 라이브러리가 올라가있는 <code class="highlighter-rouge">물리 메모리 페이지</code>들은 모든 프로세스에 공유되고 있다.</li>
  <li>프로세스들이 메모리를 공유하는 것을 가능하게 하고, 프로세스들은 공유 메모리를 통해 통신할 수 있다.
이 또한, 각 프로세스들은 각자 자신의 주소 공간처럼 인식하지만, 실제 물리 메모리는 공유되고 있다.</li>
  <li><code class="highlighter-rouge">fork()</code>를 통한 프로세스 생성 과정에서 페이지들이 공유되는 것을 가능하게 한다.</li>
</ul>

<h3 id="demand-paging요구-페이징">Demand Paging(요구 페이징)</h3>

<p>프로그램 실행 시작 시에 프로그램 전체를 디스크에서 물리 메모리에 적재하는 대신, 초기에 필요한 것들만 적재하는 전략을 <code class="highlighter-rouge">요구 페이징</code>이라 하며, 가상 메모리 시스템에서 많이 사용된다. 그리고 가상 메모리는 대개 <a href="#paging페이징">페이지</a>로 관리된다.
요구 페이징을 사용하는 가상 메모리에서는 실행과정에서 필요해질 때 페이지들이 적재된다. <strong>한 번도 접근되지 않은 페이지는 물리 메모리에 적재되지 않는다.</strong></p>

<p>프로세스 내의 개별 페이지들은 <code class="highlighter-rouge">페이저(pager)</code>에 의해 관리된다. 페이저는 프로세스 실행에 실제 필요한 페이지들만 메모리로 읽어 옮으로서, <strong>사용되지 않을 페이지를 가져오는 시간낭비와 메모리 낭비를 줄일 수 있다.</strong></p>

<h4 id="page-fault-trap페이지-부재-트랩">Page fault trap(페이지 부재 트랩)</h4>

<h3 id="페이지-교체">페이지 교체</h3>

<p><code class="highlighter-rouge">요구 페이징</code> 에서 언급된대로 프로그램 실행시에 모든 항목이 물리 메모리에 올라오지 않기 때문에, 프로세스의 동작에 필요한 페이지를 요청하는 과정에서 <code class="highlighter-rouge">page fault(페이지 부재)</code>가 발생하게 되면, 원하는 페이지를 보조저장장치에서 가져오게 된다. 하지만, 만약 물리 메모리가 모두 사용중인 상황이라면, 페이지 교체가 이뤄져야 한다.(또는, 운영체제가 프로세스를 강제 종료하는 방법이 있다.)</p>

<h4 id="기본적인-방법">기본적인 방법</h4>

<p>물리 메모리가 모두 사용중인 상황에서의 메모리 교체 흐름이다.</p>

<ol>
  <li>디스크에서 필요한 페이지의 위치를 찾는다</li>
  <li>빈 페이지 프레임을 찾는다.
    <ol>
      <li><code class="highlighter-rouge">페이지 교체 알고리즘</code>을 통해 희생될(victim) 페이지를 고른다.</li>
      <li>희생될 페이지를 디스크에 기록하고, 관련 페이지 테이블을 수정한다.</li>
    </ol>
  </li>
  <li>새롭게 비워진 페이지 테이블 내 프레임에 새 페이지를 읽어오고, 프레임 테이블을 수정한다.</li>
  <li>사용자 프로세스 재시작</li>
</ol>

<h4 id="페이지-교체-알고리즘">페이지 교체 알고리즘</h4>

<h5 id="fifo-페이지-교체">FIFO 페이지 교체</h5>

<p>가장 간단한 페이지 교체 알고리즘으로 FIFO(first-in first-out)의 흐름을 가진다. 즉, 먼저 물리 메모리에 들어온 페이지 순서대로 페이지 교체 시점에 먼저 나가게 된다는 것이다.</p>

<ul>
  <li>
    <p>장점</p>

    <ul>
      <li>이해하기도 쉽고, 프로그램하기도 쉽다.</li>
    </ul>
  </li>
  <li>
    <p>단점</p>
    <ul>
      <li>오래된 페이지가 항상 불필요하지 않은 정보를 포함하지 않을 수 있다(초기 변수 등)</li>
      <li>처음부터 활발하게 사용되는 페이지를 교체해서 페이지 부재율을 높이는 부작용을 초래할 수 있다.</li>
      <li><code class="highlighter-rouge">Belady의 모순</code>: 페이지를 저장할 수 있는 페이지 프레임의 갯수를 늘려도 되려 페이지 부재가 더 많이 발생하는 모순이 존재한다.</li>
    </ul>
  </li>
</ul>

<h5 id="최적-페이지-교체optimal-page-replacement">최적 페이지 교체(Optimal Page Replacement)</h5>

<p><code class="highlighter-rouge">Belady의 모순</code>을 확인한 이후 최적 교체 알고리즘에 대한 탐구가 진행되었고, 모든 알고리즘보다 낮은 페이지 부재율을 보이며 <code class="highlighter-rouge">Belady의 모순</code>이 발생하지 않는다. 이 알고리즘의 핵심은 <code class="highlighter-rouge">앞으로 가장 오랫동안 사용되지 않을 페이지를 찾아 교체</code>하는 것이다.
주로 비교 연구 목적을 위해 사용한다.</p>

<ul>
  <li>
    <p>장점</p>

    <ul>
      <li>알고리즘 중 가장 낮은 페이지 부재율을 보장한다.</li>
    </ul>
  </li>
  <li>
    <p>단점</p>
    <ul>
      <li>구현의 어려움이 있다. 모든 프로세스의 메모리 참조의 계획을 미리 파악할 방법이 없기 때문이다.</li>
    </ul>
  </li>
</ul>

<h5 id="lru-페이지-교체lru-page-replacement">LRU 페이지 교체(LRU Page Replacement)</h5>

<p><code class="highlighter-rouge">LRU: Least-Recently-Used</code><br />
최적 알고리즘의 근사 알고리즘으로, 가장 오랫동안 사용되지 않은 페이지를 선택하여 교체한다.</p>

<ul>
  <li>특징
    <ul>
      <li>대체적으로 <code class="highlighter-rouge">FIFO 알고리즘</code>보다 우수하고, <code class="highlighter-rouge">OPT알고리즘</code>보다는 그렇지 못한 모습을 보인다.</li>
    </ul>
  </li>
</ul>

<h5 id="lfu-페이지-교체lfu-page-replacement">LFU 페이지 교체(LFU Page Replacement)</h5>

<p><code class="highlighter-rouge">LFU: Least Frequently Used</code><br />
참조 횟수가 가장 적은 페이지를 교체하는 방법이다. 활발하게 사용되는 페이지는 참조 횟수가 많아질 거라는 가정에서 만들어진 알고리즘이다.</p>

<ul>
  <li>특징
    <ul>
      <li>어떤 프로세스가 특정 페이지를 집중적으로 사용하다, 다른 기능을 사용하게되면 더 이상 사용하지 않아도 계속 메모리에 머물게 되어 초기 가정에 어긋나는 시점이 발생할 수 있다</li>
      <li>최적(OPT) 페이지 교체를 제대로 근사하지 못하기 때문에, 잘 쓰이지 않는다.</li>
    </ul>
  </li>
</ul>

<h5 id="mfu-페이지-교체mfu-page-replacement">MFU 페이지 교체(MFU Page Replacement)</h5>

<p><code class="highlighter-rouge">MFU: Most Frequently Used</code><br />
참조 회수가 가장 작은 페이지가 최근에 메모리에 올라왔고, 앞으로 계속 사용될 것이라는 가정에 기반한다.</p>

<ul>
  <li>특징
    <ul>
      <li>최적(OPT) 페이지 교체를 제대로 근사하지 못하기 때문에, 잘 쓰이지 않는다.</li>
    </ul>
  </li>
</ul>

		<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://has3ong-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	</div>



</section>


		</div>

	</div>

	<footer class="footer">

	<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

	<div class="footer__copyright">
		<span>© 2020 Try</span>
		Has3ong
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/index-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>