<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Try

	Index Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/icon.png">
	<title>Python Code Profiler – Try</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Python Code Profiler – Try">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Python Code Profiler – Try" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/python-profiler">


	<header class="header">

	<div class="header__content">

		
		<a href="/" class="header__title">
			Try
		</a>
		

		<h1 class="header__tagline">The man who moves a mountain begins by carrying away small stones. - Confucius</h1>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/apache" class="menu__list__item__link">Apache</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blockchain" class="menu__list__item__link">BlockChain</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/computerscience" class="menu__list__item__link">Computer Science</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/database" class="menu__list__item__link">DataBase</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/devops" class="menu__list__item__link">DevOps</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/imageprocessing" class="menu__list__item__link">Image Processing</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/machinelearning" class="menu__list__item__link">Machine Learning</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/programming" class="menu__list__item__link">Programming</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/softwaremaestro" class="menu__list__item__link">SW Maestro</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/web" class="menu__list__item__link">Web</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div class="projects-menu">
			<ul class="menu__list">
				
			</ul>
		</div>

		<div class="header__lower">

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

			<div class="footer__copyright">
				<span>© 2020 Try</span>
				Has3ong
			</div>

		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Python Code Profiler – Try">

			<section class="intro">

	<div class="wrap">

		<h1>Python Code Profiler</h1>
		<p>29 November 2019</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p>테스트는 피보나치 수열을 이용했습니다.</p>

<p>보통 피보나치는 재귀형식으로 불렀을 때 효율이 엄청나게 안좋아 지는 모습을 보여주는데요. 재귀형식과 반복법을 이용하여 두 코드를 비교하도록 했습니다.</p>

<blockquote>
  <p>Test.py</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">profile</span>
<span class="k">def</span> <span class="nf">Fibonacci_Recursion</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Fibonacci_Recursion</span><span class="p">(</span><span class="n">val</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">Fibonacci_Recursion</span><span class="p">(</span><span class="n">val</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">@</span><span class="n">profile</span>
<span class="k">def</span> <span class="nf">Fibonacci_Repeat</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="n">val_1</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">val_2</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">val_3</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span>  <span class="o">=</span> <span class="mi">0</span>
 
    <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">val_2</span>
            <span class="n">val_2</span> <span class="o">=</span> <span class="n">val_1</span> <span class="o">+</span> <span class="n">val_2</span>
            <span class="n">val_1</span> <span class="o">=</span> <span class="n">temp</span>
 
        <span class="k">return</span> <span class="n">val_2</span>
 
<span class="o">@</span><span class="n">profile</span>
<span class="k">def</span> <span class="nf">TEST</span><span class="p">():</span>
    <span class="n">recursion</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">repeat</span> <span class="o">=</span> <span class="mi">0</span>
 
    <span class="n">recursion</span> <span class="o">=</span> <span class="n">Fibonacci_Recursion</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">repeat</span> <span class="o">=</span> <span class="n">Fibonacci_Repeat</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
 
    <span class="k">print</span><span class="p">(</span><span class="n">recursion</span><span class="p">,</span> <span class="n">repeat</span><span class="p">)</span>
 
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">TEST</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="cprofile">cProfile</h2>

<p>Python 은 자체적으로 cProfile이라는 모듈을 내장하고있다. 이 프로파일러는 전체 실행시간과 각각의 함수가 동작하는 시간을 측정해주며, 함수가 몇번이나 호출되었는지의 정보를 출력해준다.</p>

<p>cProfile을 사용할때는 코드의 <code class="highlighter-rouge">@Profile</code>을 모두 제거한 상태에서 진행했습니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python -m cProfile Test.py                                                                                                                    
(4181, 10946)
         13536 function calls (8 primitive calls) in 0.004 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.004    0.004 Test.py:1(&lt;module&gt;)
        1    0.000    0.000    0.000    0.000 Test.py:11(Fibonacci_Repeat)
  13529/1    0.003    0.000    0.003    0.003 Test.py:3(Fibonacci_Recursion)
        1    0.000    0.000    0.003    0.003 Test.py:30(TEST)
        1    0.000    0.000    0.000    0.000 cProfile.py:5(&lt;module&gt;)
        1    0.000    0.000    0.000    0.000 cProfile.py:66(Profile)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {range}
</code></pre></div></div>

<h2 id="line-profiler">Line Profiler</h2>

<p>함수에 대해서 라인별로 얼마나 시간이 소요되는지를 정리해주는 함수입니다.</p>

<p><code class="highlighter-rouge">pip3 install line_profiler</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kernprof -l -v Test.py

4181 10946
Wrote profile results to Test.py lprof
Timer unit 2.77277e-07 s

Total time: 0.015355 s
File: Test.py
Function: Fibonacci_Recursion at line 2

Line #  Hits    Time  Per Hit   % Time  Line Contents
=====================================================
     2                                  @profile
     3                                  def Fibonacci_Recursion(val):
     4  13529 16056.0     1.2     29.0      if (val == 1):
     5   2584  2502.0     1.0      4.5          return 0
     6  10945 11366.0     1.0     20.5      elif (val == 2):
     7   4181  3944.0     0.9      7.1          return 1
     8                                      else:
     9   6764 21510.0     3.2     38.8          return Fibonacci_Recursion(val - 1) + Fibonacci_Recursion(val -2)

Total time: 3.1055e-05 s
File: Test.py
Function: Fibonacci_Repeat at line 10

Line #  Hits    Time  Per Hit   % Time  Line Contents
=====================================================
    10                                  @profile
    11                                  def Fibonacci_Repeat(val):
    12      1     1.0     1.0      0.9      val_1 = 0
    13      1     2.0     2.0      1.8      val_2 = 1
    14      1     1.0     1.0      0.9      val_3 = 0
    15      1     1.0     1.0      0.9      temp = 0
    16             
    17      1     1.0     1.0      0.9      if (val == 0)
    18                                        return 0
    19      1     1.0     1.0      0.9      elif (val ==1)
    20                                        return 1
    21                                      else:
    22     21    36.0     1.7     32.1        for i in range(0, val):
    23     20    20.0     1.0     17.9          temp = val_2
    24     20    25.0     1.2     22.3          val_2 = val_1 + val_2
    25     20    23.0     1.1     20.5          val_1 = temp
    26
    27      1     1.0     1.0      0.9        return val_2
    
Total time: 0.0378974 s
File: Test.py
Function: TEST at line 29

Line #  Hits    Time  Per Hit   % Time  Line Contents
=====================================================
    29                                  @profile
    30                                  def TEST():
    31    1      3.0      3.0      0.0      recursion = 0
    32    1      1.0      1.0      0.0      repeat = 0
    33
    34    1 135767.0 135767.0     99.3      recursion = Fibonacci_Recursion(20)
    35    1    204.0    204.0      0.1      repeat = Fibonacci_Repeat(20)
    36
    37    1    702.0    702.0      0.5      print(recursion, repeat)
</code></pre></div></div>

<h2 id="memory-profiler">Memory Profiler</h2>

<p><code class="highlighter-rouge">Momory Profiler</code>는 프로세스의 메모리 소비를 모니터링하고 파이썬 프로그램의 메모리 소비를 라인 단위로 분석하는 python 모듈입니다.</p>

<p><code class="highlighter-rouge">pip3 install memory_profiler</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python3 -m memory_profiler Test.py                                                                                          
4181 10946
Filename: Test.py

Line #    Mem usage    Increment   Line Contents
================================================
     1   35.836 MiB   35.797 MiB   @profile
     2                             def Fibonacci_Recursion(val):
     3   35.836 MiB    0.012 MiB       if (val == 1):
     4   35.836 MiB    0.012 MiB           return 0
     5   35.836 MiB    0.016 MiB       elif (val == 2):
     6   35.836 MiB    0.000 MiB           return 1
     7                                 else:
     8   35.836 MiB    0.000 MiB           return Fibonacci_Recursion(val - 1) + Fibonacci_Recursion(val - 2)


Filename: Test.py

Line #    Mem usage    Increment   Line Contents
================================================
     9   35.836 MiB   35.836 MiB   @profile
    10                             def Fibonacci_Repeat(val):
    11   35.836 MiB    0.000 MiB       val_1 = 0
    12   35.836 MiB    0.000 MiB       val_2 = 1
    13   35.836 MiB    0.000 MiB       val_3 = 0
    14   35.836 MiB    0.000 MiB       temp  = 0
    15
    16   35.836 MiB    0.000 MiB       if (val == 0):
    17                                     return 0
    18   35.836 MiB    0.000 MiB       elif (val == 1):
    19                                     return 1
    20                                 else:
    21   35.836 MiB    0.000 MiB           for i in range (0, val):
    22   35.836 MiB    0.000 MiB               temp = val_2
    23   35.836 MiB    0.000 MiB               val_2 = val_1 + val_2
    24   35.836 MiB    0.000 MiB               val_1 = temp
    25
    26   35.836 MiB    0.000 MiB           return val_2


Filename: Test.py

Line #    Mem usage    Increment   Line Contents
================================================
    28   35.797 MiB   35.797 MiB   @profile
    29                             def TEST():
    30   35.797 MiB    0.000 MiB       recursion = 0
    31   35.797 MiB    0.000 MiB       repeat = 0
    32
    33   35.836 MiB   35.836 MiB       recursion = Fibonacci_Recursion(20)
    34   35.836 MiB   35.836 MiB       repeat = Fibonacci_Repeat(20)
    35
    36   35.840 MiB    0.004 MiB       print(recursion, repeat)
</code></pre></div></div>


	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/has3ong" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/%ED%95%98%EC%84%B1-%EA%B9%80-145aa21a0/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

	<div class="footer__copyright">
		<span>© 2020 Try</span>
		Has3ong
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/index-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>