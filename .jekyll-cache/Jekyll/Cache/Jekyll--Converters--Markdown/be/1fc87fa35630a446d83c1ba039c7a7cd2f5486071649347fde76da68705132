I"G‡<p>ê¸°ì¡´ í¬ìŠ¤íŠ¸ ê¹Œì§€ëŠ” ordererì˜ íƒ€ì…ì„ <code class="language-plaintext highlighter-rouge">solo</code>ë¡œ ë†“ê³  ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” kafkaë¥¼ ì´ìš©í•´ì„œ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">fabric-samples</code>ì—ì„œ ì œê³µí•˜ëŠ” kafka ëª¨ë“œëŠ” <code class="language-plaintext highlighter-rouge">zookeeper</code> 1ê°œ <code class="language-plaintext highlighter-rouge">kafka</code> 1ê°œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ ì˜ˆì œë¡œ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ ê·¸ëŸ¬ë©´ zookeeperë“¤ê°„ì˜ <code class="language-plaintext highlighter-rouge">Leader Election</code> ê°™ì€ ì¤‘ìš”í•œ ë¶€ë¶„ì„ ë†“ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">zookeeper</code> 3ê°œ <code class="language-plaintext highlighter-rouge">kafka</code> 4ê°œë¡œ ë§Œë“¤ì–´ì„œ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<p>ì•„ ê·¸ë¦¬ê³  ì´ ë°©ë²•ì€ VM 3ê°œë¡œ ë§Œë“œì…”ë„ ë¬´ë°©í•©ë‹ˆë‹¤. í•´ë‹¹ í™˜ê²½ ì…‹íŒ…ì€ ì•„ë˜ì²˜ëŸ¼ í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<ul>
  <li>VM1 kafka1 zookeeper1 orderer1</li>
  <li>VM2 kafka1 zookeeper1 orderer1</li>
  <li>VM3 kafka2 zookeeper1 orderer1</li>
  <li>VM4 peer2</li>
  <li>VM5 peer2</li>
</ul>

<p>ì œì¼ë¨¼ì € <code class="language-plaintext highlighter-rouge">fabric-samples/first-nework</code> í´ë” ì•ˆì— ìˆëŠ” <code class="language-plaintext highlighter-rouge">docker-compose-kafka.yaml</code> íŒŒì¼ì„ í™•ì¸í•˜ê³  ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<h1 id="settings">Settings</h1>

<p><code class="language-plaintext highlighter-rouge">Setting</code> ë¶€ë¶„ì€ <a href="/blog/fabricnetwork1">Hyperledger Fabric Network êµ¬ì„± -1-</a> ë¶€ë¶„ê³¼ ë™ì¼í•˜ë‹ˆ ë˜‘ê°™ì´ ì§„í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">HandOn</code> ë¶€ë¶„ë¶€í„° ë‹¤ë¦…ë‹ˆë‹¤.</p>

<h1 id="handson">HandsOn</h1>

<p>ë¨¼ì € í•„ìš”í•œ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ì „ ì˜ˆì œì™€ëŠ” ë‹¤ë¥´ê²Œ <code class="language-plaintext highlighter-rouge">bin</code>, <code class="language-plaintext highlighter-rouge">chaincode</code>ë§Œ ê°€ì ¸ì˜¤ë©´ ë©ë‹ˆë‹¤. ë‚˜ë¨¸ì§€ëŠ” ì œê°€ ë§Œë“¤ì–´ë…¼ ê¹ƒ ë ˆí¬ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/Has3ong/hyperledger-kafka.git
$ cd hyperledger-kafka

$ ls
base  configtx.yaml  crypto-config.yaml  docker-compose-kafka.yaml  README.md

$ sudo cp -r ../fabric-samples/bin .
$ sudo cp -r ../fabric-samples/chaincode .

$ mkdir channel-artifacts
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Kafka</code> ëª¨ë“œì—ì„œëŠ” í™˜ê²½ì— ë§ì¶°ì„œ ë§Œë“  ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì´ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì²˜ìŒë¶€í„° ëê¹Œì§€ ëª…ë ¹ì–´ë¥¼ ì¹˜ë©´ì„œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.</p>

<p>ë¨¼ì € ì œê°€ ë§Œë“¤ì–´ë…¼ ë ˆí¬ë¥¼ ê°€ì ¸ì˜¤ê³  <code class="language-plaintext highlighter-rouge">fabric-samples</code>ì—ì„œ í•„ìš”í•œ íŒŒì¼ì„ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">Kafka</code>ì™€ <code class="language-plaintext highlighter-rouge">Zookeeper</code>ì— ëŒ€í•œ ì„¤ëª…ì€ ë”°ë¡œí•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤.</p>

<h3 id="manually-generate-the-artifacts">Manually generate the artifacts</h3>

<p>ì²« ë²ˆì§¸ë¡œ <code class="language-plaintext highlighter-rouge">cryptogen</code> íŒŒì¼ì„ ì´ìš©í•˜ì—¬ ì¸ì¦ì„œ íŒŒì¼ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ì¸ì¦ì„œ íŒŒì¼ë“¤ì€ <code class="language-plaintext highlighter-rouge">crypto-config.yaml</code>ì„ í™•ì¸í•´ë³´ì‹œë©´ ì´í•´ê°€ ë˜ì‹¤ê²ë‹ˆë‹¤.</p>

<p>ì „ë¶€ í•˜ë‚˜í•˜ë‚˜ ëœ¯ì–´ë³´ê¸°ì—ëŠ” í¬ìŠ¤íŠ¸ì˜ ì–‘ì´ ë§ì•„ì§€ê¸° ë•Œë¬¸ì— ì¶”í›„ì— ì •ë¦¬í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./bin/cryptogen generate --config=./crypto-config.yaml

org1.example.com
org2.example.com
</code></pre></div></div>

<p>ë‹¤ìŒ FABRIC_CFG_PATHë¥¼ í˜„ì¬ ë””ë ‰í† ë¦¬ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export FABRIC_CFG_PATH=$PWD
</code></pre></div></div>

<p>ê·¸ ë‹¤ìŒ ìš°ë¦¬ê°€ ì‚¬ìš©í•  Fabric ë„¤íŠ¸ì›Œí¬ì— profile ì¦‰, orderer type(?) ì„ ì„¤ì •í•©ë‹ˆë‹¤. fabric-samples ì—ì„œ ì œê³µí•˜ëŠ” ì¢…ë¥˜ë¡œëŠ” Solo, RAFT, Kafka 3ê°€ì§€ê°€ ìˆëŠ”ë° ì§€ê¸ˆì€ Kafkaë¡œ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./bin/configtxgen -profile SampleDevModeKafka -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block

2019-10-22 16:20:04.785 UTC [common.tools.configtxgen] main -&gt; INFO 001 Loading configuration
2019-10-22 16:20:04.854 UTC [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 002 orderer type: kafka
2019-10-22 16:20:04.854 UTC [common.tools.configtxgen.localconfig] Load -&gt; INFO 003 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:20:04.920 UTC [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 004 orderer type: kafka
2019-10-22 16:20:04.920 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -&gt; INFO 005 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:20:04.922 UTC [common.tools.configtxgen] doOutputBlock -&gt; INFO 006 Generating genesis block
2019-10-22 16:20:04.922 UTC [common.tools.configtxgen] doOutputBlock -&gt; INFO 007 Writing genesis block
</code></pre></div></div>

<h3 id="create-a-channel-configuration-transaction">Create a Channel Configuration Transaction</h3>

<p><code class="language-plaintext highlighter-rouge">channel.tx</code>íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">channel.tx</code>ì—ëŠ” í˜„ì¬ ìš°ë¦¬ê°€ êµ¬í˜„í•  ì±„ë„ì˜ ì •ì±…ì´ë‚˜ ì¡°ì§ì˜ ì •ë³´ê°€ ë‹´ê²¨ì ¸ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³ , ê°ê°ì˜ Orgì— ì˜¬ë¼ê°ˆ <code class="language-plaintext highlighter-rouge">AnchorPeer</code>ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ëª¨ë‘ì— ëŒ€í•œ ì •ë³´ëŠ” <code class="language-plaintext highlighter-rouge">configtx.yaml</code>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHANNEL_NAME=mychannel  &amp;&amp; ./bin/configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID $CHANNEL_NAME

2019-10-22 16:21:38.626 UTC [common.tools.configtxgen] main -&gt; INFO 001 Loading configuration
2019-10-22 16:21:38.694 UTC [common.tools.configtxgen.localconfig] Load -&gt; INFO 002 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:21:38.760 UTC [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 003 orderer type: kafka
2019-10-22 16:21:38.760 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -&gt; INFO 004 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:21:38.761 UTC [common.tools.configtxgen] doOutputChannelCreateTx -&gt; INFO 005 Generating new channel configtx
2019-10-22 16:21:38.763 UTC [common.tools.configtxgen] doOutputChannelCreateTx -&gt; INFO 006 Writing new channel tx
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./bin/configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/Org1MSPanchors.tx -channelID $CHANNEL_NAME -asOrg Org1MSP

2019-10-22 16:22:03.078 UTC [common.tools.configtxgen] main -&gt; INFO 001 Loading configuration
2019-10-22 16:22:03.143 UTC [common.tools.configtxgen.localconfig] Load -&gt; INFO 002 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:22:03.206 UTC [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 003 orderer type: kafka
2019-10-22 16:22:03.207 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -&gt; INFO 004 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:22:03.207 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -&gt; INFO 005 Generating anchor peer update
2019-10-22 16:22:03.208 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -&gt; INFO 006 Writing anchor peer update

$ ./bin/configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/Org2MSPanchors.tx -channelID $CHANNEL_NAME -asOrg Org2MSP

2019-10-22 16:22:15.177 UTC [common.tools.configtxgen] main -&gt; INFO 001 Loading configuration
2019-10-22 16:22:15.245 UTC [common.tools.configtxgen.localconfig] Load -&gt; INFO 002 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:22:15.311 UTC [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 003 orderer type: kafka
2019-10-22 16:22:15.312 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -&gt; INFO 004 Loaded configuration: /home/vagrant/hyperledger-kafka/configtx.yaml
2019-10-22 16:22:15.312 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -&gt; INFO 005 Generating anchor peer update
2019-10-22 16:22:15.313 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -&gt; INFO 006 Writing anchor peer update
</code></pre></div></div>

<p>ì—¬ê¸° ê¹Œì§€ì˜ ê³¼ì •ì´ <code class="language-plaintext highlighter-rouge">byfn.sh</code>ì—ì„œì˜ <code class="language-plaintext highlighter-rouge">generate</code>ì…ë‹ˆë‹¤.</p>

<h3 id="start-the-network">Start the network</h3>

<p>ì´ì œ ì´ˆê¸° ì„¤ì •ì€ ëë‚¬ìœ¼ë‹ˆ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">docker-compose-cli.yaml</code>ê³¼ <code class="language-plaintext highlighter-rouge">docker-compose-etcdraft2</code> íŒŒì¼ì„ ì´ìš©í•˜ì—¬ ë„ì»¤ ìœ„ì— ì˜¬ë ¤ì¤ë‹ˆë‹¤.</p>

<p>ë§ˆì§€ë§‰ -d íŒŒë¼ë©”í„°ë¥¼ ë„£ì–´ì£¼ë©´ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ê°€ ì•ˆëœ¨ê³  ë°±ê·¸ë¼ìš´ë“œë¡œ ì§„í–‰ì´ ë©ë‹ˆë‹¤. ì €ëŠ” <code class="language-plaintext highlighter-rouge">orderer</code>, <code class="language-plaintext highlighter-rouge">peer</code>ë“¤ì˜ ë¡œê·¸ë„ ê°™ì´ ë³´ë©´ì„œ ì§„í–‰í•  ì˜ˆì •ì´ë‹ˆ ë¹¼ì„œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export IMAGE_TAG="latest"
$ export SYS_CHANNEL="byfn-sys-channel"
$ export COMPOSE_PROJECT_NAME=fabric

$ docker-compose -f docker-compose-kafka.yaml up
</code></pre></div></div>

<p>í–ˆì„ì‹œ ì—„ì²­ë‚˜ê²Œ ë§ì€ ë¡œê·¸ê°€ ë‚˜ì˜¤ëŠ”ë°ìš” ì´ê±´ <a href="/blog/fabricnetwork3-log">ì—¬ê¸°</a>ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—„ì²­ ê¸¸ì–´ì„œ ë”°ë¡œ í¬ìŠ¤íŠ¸ í–ˆìŠµë‹ˆë‹¤.</p>

<p>ìœ„ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì‹œì‘ì‹œ ë‚˜ì˜¤ëŠ” ë¡œê·¸ë§Œ ì ì—ˆê³  ê·¸ì™¸ì— í”¼ì–´ ì±„ë„ì„ ë§Œë“¤ë˜ê°€ ì¡°ì¸í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ë¡œê·¸ëŠ” <code class="language-plaintext highlighter-rouge">solo</code>ì™€ ë‹¤ë¥´ë‹ˆê¹Œ ì´ í¬ìŠ¤íŠ¸ì—ì„œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.</p>

<p>í˜„ì¬ docker ì»¨í…Œì´ë„ˆì˜ ëª©ë¡ì…ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker ps

CONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS              PORTS                                                                       NAMES
ded764ed15a7        hyperledger/fabric-tools:latest     "/bin/bash"              31 seconds ago      Up 29 seconds                                                                                   cli
6ee2bede7a1b        hyperledger/fabric-orderer:latest   "orderer"                33 seconds ago      Up 31 seconds       0.0.0.0:7050-&gt;7050/tcp                                                      orderer.example.com
8a22ee0028b2        hyperledger/fabric-kafka            "/docker-entrypoint.â€¦"   37 seconds ago      Up 34 seconds       0.0.0.0:12092-&gt;9092/tcp, 0.0.0.0:12093-&gt;9093/tcp                            kafka3.example.com
b111540fac69        hyperledger/fabric-kafka            "/docker-entrypoint.â€¦"   37 seconds ago      Up 33 seconds       0.0.0.0:10092-&gt;9092/tcp, 0.0.0.0:10093-&gt;9093/tcp                            kafka1.example.com
b11af475160f        hyperledger/fabric-kafka            "/docker-entrypoint.â€¦"   37 seconds ago      Up 33 seconds       0.0.0.0:9092-9093-&gt;9092-9093/tcp                                            kafka0.example.com
cdc5d93847ab        hyperledger/fabric-kafka            "/docker-entrypoint.â€¦"   37 seconds ago      Up 33 seconds       0.0.0.0:11092-&gt;9092/tcp, 0.0.0.0:11093-&gt;9093/tcp                            kafka2.example.com
b02247bb20be        hyperledger/fabric-peer:latest      "peer node start"        41 seconds ago      Up 37 seconds       0.0.0.0:9051-&gt;7051/tcp, 0.0.0.0:9053-&gt;7053/tcp                              peer0.org2.example.com
dde0266a73ae        hyperledger/fabric-zookeeper        "/docker-entrypoint.â€¦"   41 seconds ago      Up 37 seconds       0.0.0.0:22181-&gt;2181/tcp, 0.0.0.0:22888-&gt;2888/tcp, 0.0.0.0:23888-&gt;3888/tcp   zookeeper2.example.com
d35cc0974733        hyperledger/fabric-peer:latest      "peer node start"        41 seconds ago      Up 37 seconds       0.0.0.0:8051-&gt;7051/tcp, 0.0.0.0:8053-&gt;7053/tcp                              peer1.org1.example.com
efd6d970ecea        hyperledger/fabric-peer:latest      "peer node start"        41 seconds ago      Up 37 seconds       0.0.0.0:10051-&gt;7051/tcp, 0.0.0.0:10053-&gt;7053/tcp                            peer1.org2.example.com
878b55ad2ff1        hyperledger/fabric-zookeeper        "/docker-entrypoint.â€¦"   41 seconds ago      Up 37 seconds       0.0.0.0:12181-&gt;2181/tcp, 0.0.0.0:12888-&gt;2888/tcp, 0.0.0.0:13888-&gt;3888/tcp   zookeeper1.example.com
f15a30013765        hyperledger/fabric-peer:latest      "peer node start"        41 seconds ago      Up 39 seconds       0.0.0.0:7051-&gt;7051/tcp, 0.0.0.0:7053-&gt;7053/tcp                              peer0.org1.example.com
42c54c6407d5        hyperledger/fabric-zookeeper        "/docker-entrypoint.â€¦"   41 seconds ago      Up 38 seconds       0.0.0.0:2181-&gt;2181/tcp, 0.0.0.0:2888-&gt;2888/tcp, 0.0.0.0:3888-&gt;3888/tcp      zookeeper0.example.com
</code></pre></div></div>

<p>ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì„ í•˜ê¸°ì „ì— ëª‡ ê°€ì§€ ì•Œì•„ë³´ê³  ê°€ê² ìŠµë‹ˆë‹¤.</p>

<h2 id="zookeeper-leader-election">Zookeeper Leader Election</h2>

<p>ì£¼í‚¤í¼ì—ì„œ ë¦¬ë” ì„ ì¶œí•˜ëŠ” ê³¼ì •ì„ í•œë²ˆ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤. ì¼ë‹¨ ì œì¼ë¨¼ì € ë¦¬ë”ë¥¼ ì°¾ì•„ë´ì•¼í•©ë‹ˆë‹¤. ì œê°€ í™•ì¸í•´ë´¤ì„ë•Œ í˜„ì¬ 1ë²ˆ ì£¼í‚¤í¼ê°€ ë¦¬ë”ì¸ ìƒíƒœì…ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">LEADING</code>ì´ë¼ëŠ”ê±¸ ë³´ê³  í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/44635266/67323708-d0731280-f54d-11e9-9af4-fe8c03d53095.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 27 27" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2019-10-22 16:35:36,072 [myid:2] - INFO  [QuorumPeer[myid=2]/0.0.0.0:2181:QuorumPeer@856] - LEADING
2019-10-22 16:35:36,077 [myid:2] - INFO  [QuorumPeer[myid=2]/0.0.0.0:2181:Leader@59] - TCP NoDelay set to: true
</code></pre></div></div>

<p>ê·¸ëŸ¼ ì—¬ê¸°ì„œ 1ë²ˆ ì£¼í‚¤í¼ë¥¼ ì£½ì—¬ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker stop zookeeper1.example.com
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/44635266/67323709-d0731280-f54d-11e9-8351-72a010ddc378.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 27 59" /></p>

<p>ê·¸ë ‡ê²Œ ë˜ë©´ ë¦¬ë”ê°€ ì—†ë‹¤ëŠ” ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ê³  ë‹¤ì‹œ ë¦¬ë”ë¥¼ ì„ ì¶œí•˜ê²Œë©ë‹ˆë‹¤. 2ë²ˆ ì£¼í‚¤í¼ê°€ ë¦¬ë”ê°€ ë˜ì—ˆë„¤ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2019-10-22 16:47:39,235 [myid:3] - WARN  [QuorumPeer[myid=3]/0.0.0.0:2181:Follower@87] - Exception when following the leader
</code></pre></div></div>

<p>ë§Œì•½ ë¦¬ë”ë¥¼ í•œ ë²ˆë” ì£½ì´ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”. ê·¸ëŸ¬ë©´ 3ê°œì˜ ì£¼í‚¤í¼ì¤‘ ê³¼ë°˜ìˆ˜ ì´ìƒì´ ì£½ì—ˆê¸° ë•Œë¬¸ì— ë¦¬ë” ì„ ì¶œì„ í•˜ì§€ ëª»í•˜ê³  ì •ìƒì ì¸ ì‹œìŠ¤í…œ ì‘ë™ì´ ë¶ˆê°€ëŠ¥í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker stop zookeeper2.example.com
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/44635266/67324104-40819880-f54e-11e9-83e1-5a4da041be24.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 28 17" /></p>

<h2 id="kafka-leader-election">Kafka Leader Election</h2>

<p>ì´ì „ì—ëŠ” ì£¼í‚¤í¼ì—ì„œ ë¦¬ë” ì„ ì¶œí•˜ëŠ” ê³¼ì •ì„ í•œë²ˆ í™•ì¸í•´ë³´ì•˜ëŠ”ë°. ì´ë²ˆì—ëŠ” ì¹´í”„ì¹´ë¡œ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤. í˜„ì¬ ì¹´í”„ì¹´ì˜ ë¦¬ë”ëŠ” 1ë²ˆ ì¹´í”„ì¹´ì…ë‹ˆë‹¤.</p>

<p>ì œê°€ ì„¤ì •ì„ ì˜ëª»í–ˆëŠ”ì§€ <code class="language-plaintext highlighter-rouge">kafka3.example.com</code>ì´ ë¶™ì§€ë¥¼ ì•Šë„¤ìš”. ê·¸ì  ê°ì•ˆí•˜ì…”ì„œ ë³´ë©´ ë ê±°ê°™ìŠµë‹ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/44635266/67326361-665c6c80-f551-11e9-8eb2-6e82abade140.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 53 08" /></p>

<p>í•˜ë‚˜ì”© ì£½ì´ë©´ì„œ ì–´ë–»ê²Œ ë³€í™”ë˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker stop kafka1.example.com
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/44635266/67326363-665c6c80-f551-11e9-9d73-5337a3d92c2a.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 54 03" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker stop kafka2.example.com
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/44635266/67326364-66f50300-f551-11e9-9b0e-d3a68ea62cd4.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 55 13" /></p>

<p>ì¹´í”„ì¹´ëŠ” ì£¼í‚¤í¼ì™€ ë‹¤ë¥´ê²Œ 3ê°œì¤‘ì— ê³¼ë°˜ìˆ˜ ì´ìƒì´ ê³ ì¥ì´ë‚˜ì„œ ì •ì§€ê°€ ë˜ì–´ë„ ì‹œìŠ¤í…œì´ ìœ ì§€ê°€ ë©ë‹ˆë‹¤.</p>

<p>ê·¸ëŸ¼ ë‹¤ì‹œ <code class="language-plaintext highlighter-rouge">kafk1</code>ê³¼ <code class="language-plaintext highlighter-rouge">kafka2</code>ë¥¼ ì‚´ë ¤ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker start kafka1.example.com
$ docker start kafka2.example.com
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/44635266/67326366-66f50300-f551-11e9-899e-579a263b832b.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 4 55 44" /></p>

<p>ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ ë¡œê·¸ê°€ ì í™ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[2019-10-22 19:55:24,960] INFO [Partition byfn-sys-channel-0 broker=0] Expanding ISR from 0 to 0,1 (kafka.cluster.Partition)
[2019-10-22 19:55:30,000] INFO [Partition byfn-sys-channel-0 broker=0] Expanding ISR from 0,1 to 0,1,2 (kafka.cluster.Partition)
</code></pre></div></div>

<p>ì¹´í”„ì¹´ì— ë³µì œì¸ <code class="language-plaintext highlighter-rouge">ISR</code>ì´ ë§Œë“¤ì–´ì§€ë©´ì„œ ë‹¤ì‹œ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">ISR</code>ì€ <code class="language-plaintext highlighter-rouge">replication group</code>ì´ë¼ê³  ì´í•´í•˜ì‹œë©´ ì‰¬ìš¸ê²ƒì…ë‹ˆë‹¤.</p>

<p>ì´ ë¦¬ë” ì„ ì¶œì„ í¬ìŠ¤íŠ¸ì— ë‹´ê¸° ìœ„í•´ì„œ ì£¼í‚¤í¼ì™€ ì¹´í”„ì¹´ë¥¼ ê°ê° 3ê°œ 4ê°œì”© ìƒì„±í–ˆìŠµë‹ˆë‹¤.</p>

<p>ë‹¤ìŒìœ¼ë¡œëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ëŒë ¤ë³¼ê²Œìš”.</p>

<p><code class="language-plaintext highlighter-rouge">cli</code> ì»¨í…Œì´ë„ˆì— ë“¤ì–´ê°€ì„œ í”¼ì–´ë“¤ì—ê²Œ ëª…ë ¹ì„ ì£¼ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec -it cli bash

root@0d78bb69300d:/opt/gopath/src/github.com/hyperledger/fabric/peer#
</code></pre></div></div>

<h3 id="create--join-channel">Create &amp; Join Channel</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
CORE_PEER_ADDRESS=peer0.org1.example.com:7051
CORE_PEER_LOCALMSPID="Org1MSP"
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt

export CHANNEL_NAME=mychannel
export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem

$ peer channel create -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/channel.tx --tls --cafile $ORDERER_CA

2019-10-22 17:17:59.288 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 17:17:59.298 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 17:17:59.322 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 17:17:59.373 UTC [cli.common] readBlock -&gt; INFO 004 Got status: &amp;{NOT_FOUND}
2019-10-22 17:17:59.395 UTC [channelCmd] InitCmdFactory -&gt; INFO 005 Endorser and orderer connections initialized
2019-10-22 17:17:59.600 UTC [cli.common] readBlock -&gt; INFO 006 Got status: &amp;{SERVICE_UNAVAILABLE}
2019-10-22 17:17:59.603 UTC [channelCmd] InitCmdFactory -&gt; INFO 007 Endorser and orderer connections initialized
2019-10-22 17:17:59.807 UTC [cli.common] readBlock -&gt; INFO 008 Got status: &amp;{SERVICE_UNAVAILABLE}
2019-10-22 17:17:59.810 UTC [channelCmd] InitCmdFactory -&gt; INFO 009 Endorser and orderer connections initialized
2019-10-22 17:18:00.016 UTC [cli.common] readBlock -&gt; INFO 00a Received block: 0
</code></pre></div></div>

<p>ì¹´í”„ì¹´ì™€ ì˜¤ë”ëŸ¬ì˜ ë¡œê·¸ë¥¼ ë³´ê² ìŠµë‹ˆë‹¤. ê°€ì¥ ì˜¤ë¥¸ìª½ì´ ì˜¤ë”ëŸ¬ì´ë©° ì™¼ìª½ìœ¼ë¡œ í•œì¹¸ì”© ê°€ë©´ì„œ leader ì¹´í”„ì¹´, follower ì¹´í”„ì¹´ ì…ë‹ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/44635266/67327580-1e3e4980-f553-11e9-9c8c-b28089e74e1f.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 5 07 59" /></p>

<p><img src="https://user-images.githubusercontent.com/44635266/67327488-fa7b0380-f552-11e9-94ed-04f07be3f882.png" alt="ìŠ¤í¬ë¦°ìƒ· 2019-10-23 ì˜¤ì „ 5 07 03" /></p>

<p>ê°€ì¥ í° íŠ¹ì§•ìœ¼ë¡œëŠ” ë¦¬ë” ì¹´í”„ì¹´ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">Topic</code>ì„ ë§Œë“¤ì—ˆê³  ë‹¤ë¥¸ <code class="language-plaintext highlighter-rouge">follower</code>ë“¤ì€ ë¦¬ë”ì— ë°ì´í„°ë¥¼ ë³µì œí–ˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ì˜¤ë”ëŸ¬ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">producer</code>ì™€, <code class="language-plaintext highlighter-rouge">consumer</code>ë¥¼ Settingí–ˆë‹¤ê³  ë‚˜ì˜¤ë„¤ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer channel join -b mychannel.block

2019-10-22 18:27:58.955 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:27:58.960 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:27:58.969 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 18:27:58.998 UTC [channelCmd] executeJoin -&gt; INFO 004 Successfully submitted proposal to join channel


$ CORE_PEER_ADDRESS=peer1.org1.example.com:8051 \
peer channel join -b mychannel.block

2019-10-22 18:28:04.276 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:04.280 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:04.284 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 18:28:04.307 UTC [channelCmd] executeJoin -&gt; INFO 004 Successfully submitted proposal to join channel

$ CORE_PEER_ADDRESS=peer0.org2.example.com:9051 \
CORE_PEER_LOCALMSPID="Org2MSP" \
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp \
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt \
peer channel join -b mychannel.block

2019-10-22 18:28:09.625 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:09.631 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:09.636 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 18:28:09.661 UTC [channelCmd] executeJoin -&gt; INFO 004 Successfully submitted proposal to join channel

$ CORE_PEER_ADDRESS=peer1.org2.example.com:10051 \
CORE_PEER_LOCALMSPID="Org2MSP" \
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp \
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer1.org2.example.com/tls/ca.crt \
peer channel join -b mychannel.block

2019-10-22 18:28:15.381 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:15.386 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:15.389 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 18:28:15.419 UTC [channelCmd] executeJoin -&gt; INFO 004 Successfully submitted proposal to join channel
</code></pre></div></div>

<h3 id="update-anchor-peer">Update Anchor Peer</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer channel update -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/Org1MSPanchors.tx --tls --cafile $ORDERER_CA

2019-10-22 18:28:54.867 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:54.871 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:28:54.874 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 18:28:54.898 UTC [channelCmd] update -&gt; INFO 004 Successfully submitted channel update


$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp \
CORE_PEER_ADDRESS=peer0.org2.example.com:9051 \
CORE_PEER_LOCALMSPID="Org2MSP" \
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt \
peer channel update -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/Org2MSPanchors.tx --tls --cafile $ORDERER_CA

2019-10-22 18:29:07.687 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:29:07.691 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:29:07.695 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2019-10-22 18:29:07.721 UTC [channelCmd] update -&gt; INFO 004 Successfully submitted channel update
</code></pre></div></div>

<h3 id="install-chaincode">Install Chaincode</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer chaincode install -n mycc -v 1.0 -p github.com/chaincode/chaincode_example02/go/

2019-10-22 18:35:31.465 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:35:31.473 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:35:31.479 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2019-10-22 18:35:31.479 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2019-10-22 18:35:31.801 UTC [chaincodeCmd] install -&gt; INFO 005 Installed remotely response:&lt;status:200 payload:"OK" &gt;

$ CORE_PEER_ADDRESS=peer1.org1.example.com:8051 \
peer chaincode install -n mycc -v 1.0 -p github.com/chaincode/chaincode_example02/go/

2019-10-22 15:37:21.836 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc
2019-10-22 15:37:21.837 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc
2019-10-22 15:37:21.961 UTC [chaincodeCmd] install -&gt; INFO 003 Installed remotely response:&lt;status:200 payload:"OK" &gt;

$ CORE_PEER_ADDRESS=peer0.org2.example.com:9051 \
CORE_PEER_LOCALMSPID="Org2MSP" \
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp \
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt \
peer chaincode install -n mycc -v 1.0 -p github.com/chaincode/chaincode_example02/go/

2019-10-22 18:35:53.716 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:35:53.722 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:35:53.731 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2019-10-22 18:35:53.731 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2019-10-22 18:35:53.888 UTC [chaincodeCmd] install -&gt; INFO 005 Installed remotely response:&lt;status:200 payload:"OK" &gt;

$ CORE_PEER_ADDRESS=peer1.org2.example.com:10051 \
CORE_PEER_LOCALMSPID="Org2MSP" \
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp \
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer1.org2.example.com/tls/ca.crt \
peer chaincode install -n mycc -v 1.0 -p github.com/chaincode/chaincode_example02/go/

2019-10-22 18:35:57.818 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:35:57.823 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:35:57.831 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2019-10-22 18:35:57.831 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2019-10-22 18:35:58.011 UTC [chaincodeCmd] install -&gt; INFO 005 Installed remotely response:&lt;status:200 payload:"OK" &gt;
</code></pre></div></div>

<h3 id="chacincode-instantiate">ChacinCode Instantiate</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile $ORDERER_CA -C $CHANNEL_NAME -n mycc -v 1.0 -c '{"Args":["init","a","100","b","200"]}' -P "OR ('Org1MSP.peer','Org2MSP.peer')"

2019-10-22 18:36:30.531 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:36:30.537 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:36:30.552 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2019-10-22 18:36:30.552 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
</code></pre></div></div>

<h3 id="chaincode-query">ChainCode Query</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer chaincode query -C $CHANNEL_NAME -n mycc -c '{"Args":["query","a"]}'
100

$ peer chaincode query -C $CHANNEL_NAME -n mycc -c '{"Args":["query","b"]}'
200
</code></pre></div></div>

<h3 id="chaincode-invoke">ChainCode Invoke</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer chaincode invoke -o orderer.example.com:7050  --tls --cafile $ORDERER_CA  -C $CHANNEL_NAME -n mycc -c '{"Args":["invoke","a","b","10"]}'

2019-10-22 18:37:10.074 UTC [main] InitCmd -&gt; WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:37:10.079 UTC [main] SetOrdererEnv -&gt; WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable
2019-10-22 18:37:10.105 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 003 Chaincode invoke successful. result: status:200
</code></pre></div></div>

<h3 id="chaincode-query-1">ChainCode Query</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ peer chaincode query -C $CHANNEL_NAME -n mycc -c '{"Args":["query","a"]}'
90

$ peer chaincode query -C $CHANNEL_NAME -n mycc -c '{"Args":["query","b"]}'
210
</code></pre></div></div>

<p>ì²´ì¸ì½”ë“œê¹Œì§€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í–ˆìŠµë‹ˆë‹¤. ì´ í¬ìŠ¤íŠ¸ëŠ” ì—¬ê¸°ë¡œ ë§ˆë¬´ë¦¬í•˜ê³  ë‹¤ìŒì—” Raftë¥¼ ì´ìš©í•œ í•˜ì´í¼ë ›ì ¸ í˜ë¸Œë¦­ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ìœ¼ë¡œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.</p>

<p>ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>

:ET