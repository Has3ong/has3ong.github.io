I"¾#<p><em>ì´ í¬ìŠ¤íŠ¸ëŠ” <a href="https://github.com/gary136/ebook/blob/master/Flask%20Web%20Development.pdf">Flask Web Development</a>ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</em></p>

<p>Flask-WTF í™•ì¥ì€ ì›¹ í¼ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">flask</span><span class="o">-</span><span class="n">wtf</span>
</code></pre></div></div>

<h2 id="cross-site-requestforgercy-csrf-protection">Cross-Site RequestForgercy (CSRF) Protection</h2>

<p>ê¸°ë³¸ì ìœ¼ë¡œ Flask-WTF ëŠ” CSRF ê³µê²¨ìœ¼ë¡œë¶€í„° í¼ì„ ë³´í˜¸í•©ë‹ˆë‹¤. CSRF ê³µê²©ì€ ì•…ì˜ì  ì›¹ì‚¬ì´íŠ¸ì—ì„œ í¬ìƒìê°€ ë¡œê·¸ì¸í•œ ë‹¤ë¥¸ ì›¹ ì‚¬ì´íŠ¸ë¡œ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ì „ì†¡í•  ë•Œ ì¼ì–´ë‚©ë‹ˆë‹¤.</p>

<p>CSRF ë³´í˜¸ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ Flask-WTF ëŠ” ì•”í˜¸í™” í‚¤ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤. Flask-WTF ëŠ” ì´ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”ëœ í† í°ì„ ìƒì„±í•˜ê³  í† í°ì€ í¼ ë°ì´í„°ì™€ í•¨ê»˜ ë¦¬í€˜ìŠ¤íŠ¸ ì¸ì¦ì„ ê²€ì¦í•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">'SECRET_KEY'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'hard to guess string'</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">app.config</code> ë”•ì…”ë„ˆë¦¬ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ìì²´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„¤ì • ë³€ìˆ˜ë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤.</p>

<p><strong>SECRET_KEY</strong> ì„¤ì • ë³€ìˆ˜ëŠ” Flask ì™€ ì„œë“œíŒŒí‹° í™•ì¥ì—ì„œ ì¼ë°˜ì ì¸ ì•”í˜¸í™” í‚¤ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>

<h2 id="form-classes">Form Classes</h2>

<p>Flask-WTF ë¥¼ ì‚¬ìš©í•  ë•Œ ê° ì›¹ í¼ì€ Form í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì†í•œ í´ë˜ìŠ¤ì— ì˜í•´ í‘œí˜„ë©ë‹ˆë‹¤. í´ë˜ìŠ¤ëŠ” í¼ì— ìˆëŠ” í•„ë“œì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ì˜í•˜ëŠ”ë° ì´ í•„ë“œëŠ” ê°ê° ì˜¤ë¸Œì íŠ¸ë¡œ í‘œí˜„ë©ë‹ˆë‹¤. ê° í•„ë“œ ì˜¤ë¸Œì íŠ¸ëŠ” í•˜ë‚˜ ì´ìƒì˜ <strong>ê²€ì¦ì(validator)</strong> ê°€ ë¶™ì–´ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì•„ë˜ëŠ” í…ìŠ¤íŠ¸ í•„ë“œì™€ ì„œë¸Œë°‹ ë²„íŠ¼ì„ ê°–ëŠ” ì›¹ í¼ ì…ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask.ext.wtf</span> <span class="kn">import</span> <span class="n">Form</span>
<span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">SubmitField</span>
<span class="kn">from</span> <span class="nn">wtforms.validators</span> <span class="kn">import</span> <span class="n">Required</span>

<span class="k">class</span> <span class="nc">NameForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s">'What is your name?'</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">Required</span><span class="p">()])</span>
  <span class="n">submit</span> <span class="o">=</span> <span class="n">SubmitField</span><span class="p">(</span><span class="s">'Submit'</span><span class="p">)</span>
</code></pre></div></div>

<p>í¼ì— í•„ë“œëŠ” í´ë˜ìŠ¤ ë³€ìˆ˜ë¡œ ì •ì˜ë˜ë©° ê° í´ë˜ìŠ¤ ë³€ìˆ˜ëŠ” í•„ë“œ íƒ€ì…ê³¼ ê´€ê³„ëœ ì˜¤ë¸Œì íŠ¸ë¡œ í• ë‹¹ë©ë‹ˆë‹¤.</p>

<p><code class="highlighter-rouge">StringField</code> í´ë˜ìŠ¤ëŠ” input í•­ëª©ì„ type=â€textâ€ ì†ì„±ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤. <code class="highlighter-rouge">SubmitField</code> í´ë˜ìŠ¤ëŠ” input í•­ëª©ì„ type=â€submitâ€ ì†ì„±ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.</p>

<p><code class="highlighter-rouge">StringField</code> ìƒì„±ìì— í¬í•¨ë˜ì–´ìˆëŠ” validator ì¸ìˆ˜ëŠ” ì˜µì…˜ì´ë©°, ì‚¬ìš©ìê°€ ì„œë¸Œë°‹í•œ ë°ì´í„°ë¥¼ ë°›ê¸° ì „ì— ì ìš©í•˜ê²Œ ë˜ëŠ” ì²´ì»¤ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. <code class="highlighter-rouge">Required()</code> ê²€ì¦ìëŠ” í•„ë“œê°€ ë¹ˆ ê³µë€ìœ¼ë¡œ ì„œë¸Œë°‹ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³´ì¥í•œë‹¤.</p>

<blockquote>
  <p>WTForms standard HTML fields</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">StringField</td>
      <td style="text-align: left">Text field</td>
    </tr>
    <tr>
      <td style="text-align: left">TextAreaField</td>
      <td style="text-align: left">Multiple-line text field</td>
    </tr>
    <tr>
      <td style="text-align: left">PasswordField</td>
      <td style="text-align: left">Password text field</td>
    </tr>
    <tr>
      <td style="text-align: left">HiddenField</td>
      <td style="text-align: left">Hidden text field</td>
    </tr>
    <tr>
      <td style="text-align: left">DateField</td>
      <td style="text-align: left">Text field that accepts a <code class="highlighter-rouge">datetime.date</code> value in a given format</td>
    </tr>
    <tr>
      <td style="text-align: left">DateTimeField</td>
      <td style="text-align: left">Text field that accepts a <code class="highlighter-rouge">datetime.datetime</code> value in a given format</td>
    </tr>
    <tr>
      <td style="text-align: left">IntegerField</td>
      <td style="text-align: left">Text field that accepts an integer value</td>
    </tr>
    <tr>
      <td style="text-align: left">DecimalField</td>
      <td style="text-align: left">Text field that accepts a <code class="highlighter-rouge">decimal.Decimal</code> value</td>
    </tr>
    <tr>
      <td style="text-align: left">FloatField</td>
      <td style="text-align: left">Text field that accepts a floating-point value</td>
    </tr>
    <tr>
      <td style="text-align: left">RadioField</td>
      <td style="text-align: left">List of radio buttons</td>
    </tr>
    <tr>
      <td style="text-align: left">SelectField</td>
      <td style="text-align: left">Drop-down list of choices</td>
    </tr>
    <tr>
      <td style="text-align: left">SelectMultipleField</td>
      <td style="text-align: left">Drop-down list of choices with multiple selection</td>
    </tr>
    <tr>
      <td style="text-align: left">FileField</td>
      <td style="text-align: left">File upload field</td>
    </tr>
    <tr>
      <td style="text-align: left">SubmitField</td>
      <td style="text-align: left">Form submission button</td>
    </tr>
    <tr>
      <td style="text-align: left">FormField</td>
      <td style="text-align: left">Embed a form as a field in a container form</td>
    </tr>
    <tr>
      <td style="text-align: left">FieldList</td>
      <td style="text-align: left">List of fields of a given type</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>WTForms Validator</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Validator</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Email</td>
      <td style="text-align: left">Validates an email address</td>
    </tr>
    <tr>
      <td style="text-align: left">EqualTo</td>
      <td style="text-align: left">Compares the values of two fields; useful when requesting a password to be entered twice for confirmation</td>
    </tr>
    <tr>
      <td style="text-align: left">IPAddress</td>
      <td style="text-align: left">Validate an IPv4 network address</td>
    </tr>
    <tr>
      <td style="text-align: left">Length</td>
      <td style="text-align: left">Validates the length of the string entered</td>
    </tr>
    <tr>
      <td style="text-align: left">NumberRange</td>
      <td style="text-align: left">Validates that the value entered is within a numeric range</td>
    </tr>
    <tr>
      <td style="text-align: left">Optional</td>
      <td style="text-align: left">Allows empty input on the field, skipping additional validators</td>
    </tr>
    <tr>
      <td style="text-align: left">Required</td>
      <td style="text-align: left">Validates that the field contains data</td>
    </tr>
    <tr>
      <td style="text-align: left">Regexp</td>
      <td style="text-align: left">Validates the input against a regular expression</td>
    </tr>
    <tr>
      <td style="text-align: left">URL</td>
      <td style="text-align: left">Validates a URL</td>
    </tr>
    <tr>
      <td style="text-align: left">AnyOf</td>
      <td style="text-align: left">Validates that the input is one of a list of possible values</td>
    </tr>
    <tr>
      <td style="text-align: left">NoneOf</td>
      <td style="text-align: left">Validates that the input is none of a list of possible values</td>
    </tr>
  </tbody>
</table>

:ET